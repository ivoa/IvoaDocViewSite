IVOA Documents View Site
=========================

This project is aiming to create a more modern and integrated
view on the IVOA standard documents. It aims to do this by 
transforming the source of the documents using [pandoc](https://pandoc.org/) 
and then putting them into a structure delivered using 
[sphinx](https://www.sphinx-doc.org/). Once complete, it is hoped that this is a
more accessible resource for developers to use to understand how to 
write code compliant with IVOA standards.

It is specifically not intended
to change or replace the standard IVOA document publishing system. Although
perhaps a long term aim, if successful, might be to influence style of the 
content of the standards documents - however, there will always be a conflict
between the designed for academic paper delivery style and a more on-line 
documentation approach.

Current Status
--------------

This is still in the proof of concept stage, so there are many faults. Mostly because
not all the transformations below have been implemented yet.

The result of running the process is available in [GitHub Pages](https://ivoa.github.io/IvoaDocViewSite)

### Transformations

The desired transformations to make the documents more "readable" online are
* remove some of the front matter from each document
* have a single bibliography
* redo citation links to other standards as internal URLs



Site layout
-----------

The original source documents are in [src](./src) as
git submodule references to the original GitHub projects in the
[ivoa-std organisation](https://github.com/ivoa-std). These documents are transformed
into the [sphinxSource/idoc](./sphinxSource/idoc) directory tree. The other content under
[sphinxSource](./sphinxSource) forms the "framework" site in which the autogenerated 
documentation sits.



## Developing This site

Git submodules are a little difficult to manage - especially when trying to make sure that they point to the latest git commit hash for the module

```terminaloutput
git submodule update --recursive --remote
```

https://stackoverflow.com/questions/58457140/dependencies-between-workflows-on-github-actions/64733705#64733705

## Pandoc customization

In general there is customization required for two reasons

* pandoc's default translation from latex to restructured text does not quite work as required
* to perform one of the desired transformations

this is done via https://pandoc.org/lua-filters.html, with some examples in https://github.com/pandoc-ext

## Sphinx Notes

* https://github.com/sphinx-doc/sphinx/issues/6614

#### fixes

* The title is being numbered - this seems wrong... https://github.com/sphinx-doc/sphinx/issues/4628 - however, https://github.com/nowox/sphinx-fix-sectnum does not work
  * another solution is to do this in pandoc...